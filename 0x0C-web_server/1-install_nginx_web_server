#!/usr/bin/env bash
# Update package list and install nginx.
sudo apt-get update -y
sudo apt-get upgrade -y
sudo apt-get install nginx -y

# Configure nginx to listen on port 80
sudo sed -i 's/listen 80;/listen 80 default_server;/g' /etc/nginx/sites-available/default

# Restart nginx (without using systemctl)
sudo service nginx restart

# Create a simple HTML file with "Hello World!"
echo "Hello World!" | sudo tee /var/www/html/index.html

# Verify nginx is serving the correct page
if curl -sI localhost | grep -q "200 OK"; then
    echo "Nginx is configured successfully."
else
    echo "Nginx configuration failed."
fi
